<form nz-form [formGroup]="form">
  <!-- Date & Time -->
  <nz-form-item>
    <nz-form-label [nzSpan]="rowSpan.colOne" nzFor="id-date"> Date </nz-form-label>
    <nz-form-control [nzSpan]="7" nzErrorTip="Match time is required.">
      <nz-date-picker id="id-date" formControlName="date" nzPlaceHolder="YYYY-MM-DD"></nz-date-picker>
    </nz-form-control>
    &nbsp;
    <nz-form-control [nzSpan]="6">
      <nz-time-picker
        id="id-time"
        formControlName="time"
        nzPlaceHolder="HH:mm"
        nzFormat="HH:mm"
        (keydown)="onTimePickerKeydown($event)"
      ></nz-time-picker>
    </nz-form-control>
  </nz-form-item>

  <!-- TODO Do I need id-venue -->
  <nz-form-item>
    <nz-form-label [nzSpan]="rowSpan.colOne" nzFor="id-venue"> Venue </nz-form-label>
    <nz-form-control [nzSpan]="rowSpan.colTwo" nzErrorTip="Venue is required">
      <nz-select
        nzShowSearch
        nzAllowClear
        nzPlaceHolder="Select a venue"
        formControlName="venue"
        [compareWith]="compareByIdFn"
      >
        @for (venue of venueOptions(); track venue.value.id) {
        <nz-option [nzValue]="venue.value" [nzLabel]="venue.label"></nz-option>
        }
      </nz-select>
    </nz-form-control>
  </nz-form-item>

  <nz-form-item>
    <nz-form-label [nzSpan]="rowSpan.colOne" nzFor="id-competition"> Competition </nz-form-label>
    <nz-form-control [nzSpan]="rowSpan.colTwo" nzErrorTip="Competition is required">
      <nz-select
        id="id-competition"
        nzShowSearch
        nzAllowClear
        nzPlaceHolder="Select a competition"
        formControlName="competition"
        [compareWith]="compareByIdFn"
      >
        @for (comp of competitionOptions(); track comp.value.id) {
        <nz-option [nzValue]="comp.value" [nzLabel]="comp.label"></nz-option>
        }
      </nz-select>
    </nz-form-control>
  </nz-form-item>

  <!-- Opponent -->
  <nz-form-item>
    <nz-form-label [nzSpan]="rowSpan.colOne" nzFor="id-opponent"> Opponent </nz-form-label>
    <nz-form-control [nzSpan]="rowSpan.colTwo" nzErrorTip="Opponent is required">
      <nz-select
        id="id-opponent"
        nzShowSearch
        nzAllowClear
        nzPlaceHolder="Select an opponent"
        formControlName="opponent"
        [compareWith]="compareByIdFn"
      >
        @for(team of teamOptions(); track team.value.id) {
        <nz-option [nzValue]="team.value" [nzLabel]="team.label"></nz-option>
        }
      </nz-select>
    </nz-form-control>
  </nz-form-item>

  <!-- Opponent Goals -->
  <nz-form-item>
    <nz-form-label [nzSpan]="rowSpan.colOne"> Score </nz-form-label>
    <nz-form-control [nzSpan]="7">
      <nz-input-number formControlName="homeGoals" nzMin="0" nzMax="19">
        <span nzInputAddonBefore>OSM</span>
      </nz-input-number>
    </nz-form-control>
    <nz-form-control [nzSpan]="8">
      <nz-input-number formControlName="opponentGoals" nzMin="0" nzMax="19">
        <span nzInputAddonBefore>OPP</span>
      </nz-input-number>
    </nz-form-control>
  </nz-form-item>

  <!--  Goals -->
  <div formArrayName="goals">
    @for (goal of goals.controls; track goal; let i = $index) {
    <nz-form-item>
      @if (i === 0) {
      <nz-form-label [nzSpan]="rowSpan.colOne" nzFor="id-goals"> Goals </nz-form-label>
      }
      <nz-form-control [nzSpan]="rowSpan.colTwo" [nzOffset]="i === 0 ? 0 : rowSpan.colOne" [formGroupName]="i">
        <div class="goals-control">
          <nz-select
            nzShowSearch
            nzAllowClear
            nzPlaceHolder="Scored"
            formControlName="scored"
            [compareWith]="compareByIdFn"
          >
            @for(scorer of playerOptions(); track scorer.value.id) {
            <nz-option [nzValue]="scorer.value" [nzLabel]="scorer.label"></nz-option>
            }
          </nz-select>
          <nz-select
            nzShowSearch
            nzAllowClear
            nzPlaceHolder="Assisted"
            formControlName="assisted"
            [compareWith]="compareByIdFn"
          >
            @for(assistant of playerOptions(); track assistant.value.id) {
            <nz-option [nzValue]="assistant.value" [nzLabel]="assistant.label"></nz-option>
            }
          </nz-select>
        </div>
      </nz-form-control>
    </nz-form-item>
    }
  </div>
</form>
